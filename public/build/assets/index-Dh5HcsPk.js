import{S as y,_ as D}from"./AppLayout-zZJpVE-7.js";import{Q as M,d as m,p as f,o,e as l,a as t,F as h,h as g,n as H,t as d,f as r,l as L,k as p,v as b,q as R,z as T,y as A,u as O,c as q,w as G,b as Q}from"./app-BGk4g9jz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"relative px-10 py-10 bg-white shadow-lg sm:rounded-3xl sm:p-20"},K={class:"mb-6 flex justify-center"},W=["onClick"],X={class:"flex justify-end mb-4"},Y={class:"mb-8"},Z={class:"text-xl font-semibold mb-4"},ee={class:"min-w-full bg-white border border-gray-200"},se={key:0,class:"px-4 py-2 border-b"},oe={key:1,class:"px-4 py-2 border-b"},le={key:2,class:"px-4 py-2 border-b"},te={key:3,class:"px-4 py-2 border-b"},re={key:4,class:"px-4 py-2 border-b"},ae={key:5,class:"px-4 py-2 border-b"},ue={key:6,class:"px-4 py-2 border-b"},ne={key:7,class:"px-4 py-2 border-b"},de={key:8,class:"px-4 py-2 border-b"},ie={key:9,class:"px-4 py-2 border-b"},ce={key:10,class:"px-4 py-2 border-b"},pe={key:11,class:"px-4 py-2 border-b"},ve={key:12,class:"px-4 py-2 border-b"},be={key:0,class:"px-4 py-2 border-b"},me={key:1,class:"px-4 py-2 border-b"},_e={key:2,class:"px-4 py-2 border-b"},xe={key:3,class:"px-4 py-2 border-b"},ye={key:4,class:"px-4 py-2 border-b"},fe={key:5,class:"px-4 py-2 border-b"},he={key:6,class:"px-4 py-2 border-b"},ge={key:7,class:"px-4 py-2 border-b"},ke={key:8,class:"px-4 py-2 border-b"},we={key:0,class:"bg-green-500 text-white px-2 py-1 rounded-full"},Se={key:1,class:"bg-red-500 text-white px-2 py-1 rounded-full"},Ce={key:9,class:"px-4 py-2 border-b"},Ve={key:10,class:"px-4 py-2 border-b"},Ue={key:11,class:"px-4 py-2 border-b"},Te={key:12,class:"px-4 py-2 border-b"},Ae={class:"px-4 py-2 border-b"},Me=["onClick"],Be=["onClick"],$e={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"},ze={class:"bg-white p-6 rounded-lg w-1/2"},Ne={class:"text-xl font-semibold mb-4"},je={key:0},Ee={key:0,class:"text-red-500 text-sm"},Fe={key:1,class:"text-red-500 text-sm"},Ie={key:2,class:"text-red-500 text-sm"},Pe={key:3,class:"text-red-500 text-sm"},De={class:"flex space-x-4"},He={key:0,class:"text-red-500 text-sm"},Le={key:0,class:"text-red-500 text-sm"},Re={class:"flex items-center"},Oe={key:4,class:"text-red-500 text-sm"},qe={key:5,class:"text-red-500 text-sm"},Ge=["value"],Qe={key:6,class:"text-red-500 text-sm"},Je=["value"],Ke={key:7,class:"text-red-500 text-sm"},We={key:1,class:"flex flex-col"},Xe={key:0,class:"text-red-500 text-sm"},Ye={key:1,class:"text-red-500 text-sm"},Ze={key:2,class:"text-red-500 text-sm"},es={key:3,class:"text-red-500 text-sm"},ss={key:4,class:"text-red-500 text-sm"},os={class:"flex justify-end"},ls={type:"submit",class:"bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600 transition-colors duration-200 ease-in-out"},ts={__name:"Personal",setup(B){const{props:c}=M(),k=m(c.sucursales),_=m(!1),$=[{label:"Usuarios",value:"users"},{label:"Sucursales",value:"sucursales"}],u=m("users"),a=m({id:null,id_user:null,name:"",apellido_p:"",apellido_m:"",inicio_contrato:"",fin_contrato:"",email:"",password:"",sucursal_id:"",role:"",nombre:"",direccion:"",telefono:"",active:!1}),z=f(()=>u.value==="users"?"Usuarios":"Sucursales"),w=f(()=>u.value==="users"?"Usuario":"Sucursal"),n=m({}),N=f(()=>u.value==="users"?c.users:c.sucursales.filter(i=>i.id!==0)),j=f(()=>c.roles.filter(i=>["admin","trabajador"].includes(i.name))),S=i=>{if(!c.sucursales||!c.sucursalSession)return null;const s=c.sucursales.find(e=>e.id===i);if(s){const e=c.sucursalSession.find(v=>v.sucursal_id===s.id);if(e)return e}return null},C=()=>{_.value=!0},V=()=>{_.value=!1,U()},E=()=>{const i=!!a.value.id,s=i?`/${u.value}/${a.value.id}`:`/${u.value}`;A[i?"put":"post"](s,a.value,{preserveScroll:!0,onSuccess:v=>{x.fire({icon:"success",title:i?"Actualizado correctamente":"Agregado correctamente"}),u.value==="users"?c.users=v.props.users:(c.sucursales=v.props.sucursales,c.sucursalSession=v.props.sucursalSession),V()},onError:v=>{x.fire({icon:"error",title:"Hubo un problema al procesar la solicitud"}),n.value=v}})},F=i=>{u.value=i,U()},x=y.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:i=>{i.onmouseenter=y.stopTimer,i.onmouseleave=y.resumeTimer}}),I=i=>{var s,e,v;a.value={id:i.id,id_user:((s=S(i.id))==null?void 0:s.id)||null,name:i.name||"",apellido_p:i.apellido_p||"",apellido_m:i.apellido_m||"",tel:i.tel||"",email:i.email||((e=S(i.id))==null?void 0:e.email)||"",sucursal_id:i.sucursal_id||"",role:((v=i.roles)==null?void 0:v[0])||"",nombre:i.nombre||"",direccion:i.direccion||"",telefono:i.telefono||"",inicio_contrato:i.inicio_contrato||"",fin_contrato:i.fin_contrato||"",active:i.active||!1,password:""},C()},P=i=>{y.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esta acción!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminarlo",cancelButtonText:"Cancelar"}).then(s=>{s.isConfirmed&&A.delete(`/${u.value}/${i}`,{preserveScroll:!0,onSuccess:e=>{x.fire({icon:"success",title:"Eliminado correctamente"}),u.value==="users"?c.users=e.props.users:(c.sucursales=e.props.sucursales,c.sucursalSession=e.props.sucursalSession),n.value={}},onError:e=>{x.fire({icon:"error",title:n.value=e.error||"Hubo un problema al eliminar el elemento"}),n.value=e}})})},U=()=>{a.value={id:null,id_user:null,name:"",email:"",password:"",sucursal_id:"",role:"",nombre:"",direccion:"",telefono:""},n.value={}};return(i,s)=>(o(),l("div",J,[s[25]||(s[25]=t("h1",{class:"text-3xl font-semibold mb-6 text-center"},"Gestión de Personal",-1)),t("div",K,[(o(),l(h,null,g($,e=>t("button",{key:e.value,onClick:v=>F(e.value),class:H(["px-4 py-2 mx-1 rounded-full transition-colors duration-200 ease-in-out",u.value===e.value?"bg-orange-500 text-white":"bg-gray-200 hover:bg-gray-300"])},d(e.label),11,W)),64))]),t("div",X,[t("button",{onClick:C,class:"bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600 transition-colors duration-200 ease-in-out"}," Agregar "+d(w.value),1)]),t("div",Y,[t("h2",Z,d(z.value),1),t("table",ee,[t("thead",null,[t("tr",null,[u.value==="users"?(o(),l("th",se,"Nombre")):r("",!0),u.value==="users"?(o(),l("th",oe,"Apellido P.")):r("",!0),u.value==="users"?(o(),l("th",le,"Apellido M.")):r("",!0),u.value==="users"?(o(),l("th",te,"Telefono")):r("",!0),u.value==="users"?(o(),l("th",re,"Usuario")):r("",!0),u.value==="users"?(o(),l("th",ae,"Inicio Contrato")):r("",!0),u.value==="users"?(o(),l("th",ue,"Fin Contrato")):r("",!0),u.value==="users"?(o(),l("th",ne,"Sucursal")):r("",!0),u.value==="users"?(o(),l("th",de,"Activo")):r("",!0),u.value==="users"?(o(),l("th",ie,"Rol")):r("",!0),u.value==="sucursales"?(o(),l("th",ce,"Nombre de Sucursal")):r("",!0),u.value==="sucursales"?(o(),l("th",pe,"Dirección")):r("",!0),u.value==="sucursales"?(o(),l("th",ve,"Teléfono")):r("",!0),s[16]||(s[16]=t("th",{class:"px-4 py-2 border-b"},"Acciones",-1))])]),t("tbody",null,[(o(!0),l(h,null,g(N.value,e=>(o(),l("tr",{key:e.id,class:"hover:bg-gray-50"},[u.value==="users"?(o(),l("td",be,d(e.name),1)):r("",!0),u.value==="users"?(o(),l("td",me,d(e.apellido_p),1)):r("",!0),u.value==="users"?(o(),l("td",_e,d(e.apellido_m),1)):r("",!0),u.value==="users"?(o(),l("td",xe,d(e.tel),1)):r("",!0),u.value==="users"?(o(),l("td",ye,d(e.email),1)):r("",!0),u.value==="users"?(o(),l("td",fe,d(e.inicio_contrato),1)):r("",!0),u.value==="users"?(o(),l("td",he,d(e.fin_contrato),1)):r("",!0),u.value==="users"?(o(),l("td",ge,d(e.sucursal),1)):r("",!0),u.value==="users"?(o(),l("td",ke,[e.active?(o(),l("span",we,"Activo")):(o(),l("span",Se,"Inactivo"))])):r("",!0),u.value==="users"?(o(),l("td",Ce,d(e.roles[0]||"Sin rol"),1)):r("",!0),u.value==="sucursales"?(o(),l("td",Ve,d(e.nombre),1)):r("",!0),u.value==="sucursales"?(o(),l("td",Ue,d(e.direccion),1)):r("",!0),u.value==="sucursales"?(o(),l("td",Te,d(e.telefono||"Sin teléfono"),1)):r("",!0),t("td",Ae,[t("button",{onClick:v=>I(e),class:"text-orange-500 hover:text-orange-700 mr-2"},s[17]||(s[17]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)]),8,Me),t("button",{onClick:v=>P(e.id),class:"text-red-500 hover:text-red-700"},s[18]||(s[18]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]),8,Be)])]))),128))])])]),_.value?(o(),l("div",$e,[t("div",ze,[t("h2",Ne,d(a.value.id?"Editar":"Agregar")+" "+d(w.value),1),t("form",{onSubmit:L(E,["prevent"]),class:"space-y-4"},[u.value==="users"?(o(),l("div",je,[p(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>a.value.name=e),placeholder:"Nombre",class:"w-full px-3 py-2 border rounded"},null,512),[[b,a.value.name]]),n.value.name?(o(),l("span",Ee,d(n.value.name),1)):r("",!0),p(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>a.value.apellido_p=e),placeholder:"Apellido Paterno",class:"w-full px-3 py-2 border rounded"},null,512),[[b,a.value.apellido_p]]),n.value.apellido_p?(o(),l("span",Fe,d(n.value.apellido_p),1)):r("",!0),p(t("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>a.value.apellido_m=e),placeholder:"Apellido Materno",class:"w-full px-3 py-2 border rounded"},null,512),[[b,a.value.apellido_m]]),n.value.apellido_m?(o(),l("span",Ie,d(n.value.apellido_m),1)):r("",!0),p(t("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>a.value.tel=e),placeholder:"Teléfono",class:"w-full px-3 py-2 border rounded"},null,512),[[b,a.value.tel]]),n.value.tel?(o(),l("span",Pe,d(n.value.tel),1)):r("",!0),t("div",De,[t("div",null,[s[19]||(s[19]=t("label",{for:"inicio_contrato",class:"block text-sm font-medium text-gray-700"},"Inicio de Contrato",-1)),p(t("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>a.value.inicio_contrato=e),type:"date",id:"inicio_contrato",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[b,a.value.inicio_contrato]]),n.value.inicio_contrato?(o(),l("span",He,d(n.value.inicio_contrato),1)):r("",!0)]),t("div",null,[s[20]||(s[20]=t("label",{for:"fin_contrato",class:"block text-sm font-medium text-gray-700"},"Fin de Contrato",-1)),p(t("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>a.value.fin_contrato=e),type:"date",id:"fin_contrato",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[b,a.value.fin_contrato]]),n.value.fin_contrato?(o(),l("span",Le,d(n.value.fin_contrato),1)):r("",!0)])]),t("div",Re,[p(t("input",{"onUpdate:modelValue":s[6]||(s[6]=e=>a.value.active=e),"true-value":1,"false-value":0,type:"checkbox",id:"active",class:"form-checkbox h-5 w-5 text-orange-500"},null,512),[[R,a.value.active]]),s[21]||(s[21]=t("label",{for:"active",class:"ml-2 text-sm font-medium text-gray-700"},"Activo",-1))]),p(t("input",{"onUpdate:modelValue":s[7]||(s[7]=e=>a.value.email=e),type:"text",placeholder:"Matricula",class:"mt-2 w-full px-3 py-2 border rounded"},null,512),[[b,a.value.email]]),n.value.email?(o(),l("span",Oe,d(n.value.email),1)):r("",!0),p(t("input",{"onUpdate:modelValue":s[8]||(s[8]=e=>a.value.password=e),type:"password",placeholder:"Contraseña",class:"mt-2 w-full px-3 py-2 border rounded"},null,512),[[b,a.value.password]]),n.value.password?(o(),l("span",qe,d(n.value.password),1)):r("",!0),p(t("select",{"onUpdate:modelValue":s[9]||(s[9]=e=>a.value.sucursal_id=e),class:"mt-2 w-full px-3 py-2 border rounded"},[s[22]||(s[22]=t("option",{value:""},"Seleccionar Sucursal",-1)),(o(!0),l(h,null,g(k.value,e=>(o(),l("option",{key:e.id,value:e.id},d(e.nombre),9,Ge))),128))],512),[[T,a.value.sucursal_id]]),n.value.sucursal_id?(o(),l("span",Qe,d(n.value.sucursal_id),1)):r("",!0),p(t("select",{"onUpdate:modelValue":s[10]||(s[10]=e=>a.value.role=e),class:"mt-2 w-full px-3 py-2 border rounded"},[s[23]||(s[23]=t("option",{value:""},"Seleccionar Rol",-1)),(o(!0),l(h,null,g(j.value,e=>(o(),l("option",{key:e.id,value:e.name},d(e.name),9,Je))),128))],512),[[T,a.value.role]]),n.value.role?(o(),l("span",Ke,d(n.value.role),1)):r("",!0)])):u.value==="sucursales"?(o(),l("div",We,[p(t("input",{"onUpdate:modelValue":s[11]||(s[11]=e=>a.value.nombre=e),placeholder:"Nombre de Sucursal",class:"w-full px-3 py-2 border rounded"},null,512),[[b,a.value.nombre]]),n.value.nombre?(o(),l("span",Xe,d(n.value.nombre),1)):r("",!0),p(t("input",{"onUpdate:modelValue":s[12]||(s[12]=e=>a.value.direccion=e),placeholder:"Dirección",class:"mt-2 w-full px-3 py-2 border rounded"},null,512),[[b,a.value.direccion]]),n.value.direccion?(o(),l("span",Ye,d(n.value.direccion),1)):r("",!0),p(t("input",{"onUpdate:modelValue":s[13]||(s[13]=e=>a.value.telefono=e),placeholder:"Teléfono",class:"mt-2 w-full px-3 py-2 border rounded"},null,512),[[b,a.value.telefono]]),n.value.telefono?(o(),l("span",Ze,d(n.value.telefono),1)):r("",!0),s[24]||(s[24]=t("label",{for:"credenciales",class:"pt-4 font-semibold"},"Credenciales de inicio de sesión",-1)),p(t("input",{"onUpdate:modelValue":s[14]||(s[14]=e=>a.value.email=e),placeholder:"Matricula",class:"mt-2 w-full px-3 py-2 border rounded"},null,512),[[b,a.value.email]]),n.value.email?(o(),l("span",es,d(n.value.email),1)):r("",!0),p(t("input",{"onUpdate:modelValue":s[15]||(s[15]=e=>a.value.password=e),placeholder:"Contraseña",class:"mt-2 w-full px-3 py-2 border rounded"},null,512),[[b,a.value.password]]),n.value.password?(o(),l("span",ss,d(n.value.password),1)):r("",!0)])):r("",!0),t("div",os,[t("button",ls,d(a.value.id?"Actualizar":"Agregar"),1),t("button",{onClick:V,type:"button",class:"ml-2 bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400 transition-colors duration-200 ease-in-out"}," Cancelar ")])],32)])])):r("",!0)]))}},rs={class:"py-6"},as={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-2 md:p-8"},us={class:"bg-white overflow-hidden shadow-xl rounded-xl"},cs={__name:"index",setup(B){const{props:c}=M();return console.log(c.user.roles[0]),(k,_)=>O(c).user.roles[0]!=="trabajador"?(o(),q(D,{key:0,title:"Tablero principal"},{default:G(()=>[t("div",rs,[t("div",as,[t("div",us,[Q(ts)])])])]),_:1})):r("",!0)}};export{cs as default};
