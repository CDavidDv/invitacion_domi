import{_ as P}from"./AppLayout-d2O9Z-9c.js";import{Q as j,T as B,d as c,x as H,o as r,e as l,a as e,k as E,j as x,v as m,u as n,t as o,f as p,F as M,h as q,n as T,y as L,z as C,c as O,w as Q,b as G}from"./app-BltF6xnM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"min-h-max h-[80vh] gap-5 m-auto md:flex-row flex flex-col items-center p-4 md:p-8 justify-center"},K={class:"flex flex-col w-full"},W={class:"w-full flex gap-5 flex-col md:flex-row items-start"},X={class:"md:w-4/12 h-fit w-full border p-10 rounded-xl shadow-xl"},Y={class:"rounded-md shadow-sm -space-y-px"},Z={key:0,class:"mt-4 text-sm text-green-600"},ee={key:1,class:"mt-4 text-sm text-red-600"},te={key:0,class:"md:w-8/12 w-full h-fit"},se={class:"flex md:space-x-4 flex-col md:flex-row"},oe={class:"flex-1 p-2 md:p-0"},ae={class:"flex-1 p-2 md:p-0"},re={class:"overflow-x-auto"},le={class:"min-w-full divide-y divide-gray-200"},de={class:"bg-white divide-y divide-gray-200"},ne={class:"px-6 py-4 whitespace-nowrap"},ie={class:"px-6 py-4 whitespace-nowrap"},ce={class:"px-6 py-4 whitespace-nowrap"},pe={class:"px-6 py-4 whitespace-nowrap"},ue={class:"px-6 py-4 whitespace-nowrap"},xe={class:"px-6 py-4 whitespace-nowrap"},me={key:0,class:"min-h-max w-full gap-5 m-auto md:flex-row flex flex-col items-center p-4 md:p-8 justify-center"},fe={class:"w-full"},ge={class:"flex flex-col items-center justify-center"},he={key:0,class:"mt-4 text-sm text-green-600"},ye={key:1,class:"mt-4 text-sm text-red-600"},we={key:0,class:"mt-6"},ve={class:"overflow-x-auto"},be={class:"min-w-full divide-y divide-gray-200"},_e={class:"bg-white divide-y divide-gray-200"},ke={class:"px-6 py-4 whitespace-nowrap"},De={class:"px-6 py-4 whitespace-nowrap"},Se={class:"px-6 py-4 whitespace-nowrap"},Ee={class:"px-6 py-4 whitespace-nowrap"},Me={class:"px-6 py-4 whitespace-nowrap"},Fe={class:"px-6 py-4 whitespace-nowrap"},Ue={class:"px-6 py-4 whitespace-nowrap"},Ie={class:"px-6 py-4 whitespace-nowrap"},Ve={class:"px-6 py-4 whitespace-nowrap"},$e={__name:"Checador",setup(R){const{props:u}=j(),d=B({email:"",password:"",sucursal_id:u.auth.user.sucursal_id}),f=c({email:"",searchDate:""}),w=c(""),v=c(""),D=c([]),N=()=>{L.post("/search-user-check-ins",f.value).then(a=>{D.value=a.data.checkIns,v.value="Resultados de la búsqueda obtenidos con éxito.",w.value=""}).catch(a=>{w.value=`Error al obtener los resultados de la búsqueda. ${a}`,v.value=""})},i=B({startDate:"",endDate:""}),S=c(u.checkIns),b=c(""),_=c("");H(()=>{u.filters&&(i.startDate=u.filters.startDate||"",i.endDate=u.filters.endDate||"")});const k=a=>a?new Date(a).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):"-",z=()=>{C.post("/checkInOut",{email:d.email,password:d.password,sucursal_id:d.sucursal_id},{preserveState:!0,preserveScroll:!0,onSuccess:a=>{b.value=a.props.flash.success,_.value="",d.reset("password"),d.reset("email"),S.value=a.props.checkIns},onError:a=>{_.value=Object.values(a)[0],b.value=""}})},A=()=>{C.post("/search-check-ins",i.data(),{preserveState:!0,preserveScroll:!0,only:["checkIns"],onSuccess:a=>{S.value=a.props.checkIns}})};return(a,s)=>(r(),l(M,null,[e("div",J,[e("div",K,[e("div",W,[e("div",X,[s[9]||(s[9]=e("div",null,[e("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Registro de Entrada/Salida ")],-1)),e("form",{class:"mt-8 space-y-6",onSubmit:E(z,["prevent"])},[e("div",Y,[e("div",null,[s[6]||(s[6]=e("label",{for:"email",class:"sr-only"},"Matricula de Usuario",-1)),x(e("input",{id:"email",name:"email",type:"text",required:"",autocomplete:"username",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 sm:text-sm",placeholder:"Matricula de Usuario","onUpdate:modelValue":s[0]||(s[0]=t=>n(d).email=t)},null,512),[[m,n(d).email]])]),e("div",null,[s[7]||(s[7]=e("label",{for:"password",class:"sr-only"},"Contraseña",-1)),x(e("input",{id:"password",name:"password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 sm:text-sm",placeholder:"Contraseña","onUpdate:modelValue":s[1]||(s[1]=t=>n(d).password=t)},null,512),[[m,n(d).password]])])]),s[8]||(s[8]=e("div",null,[e("button",{type:"submit",class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500"}," Registrar ")],-1))],32),b.value?(r(),l("div",Z,o(b.value),1)):p("",!0),_.value?(r(),l("div",ee,o(_.value),1)):p("",!0)]),a.$page.props.user.roles[0].name!=="trabajador"?(r(),l("div",te,[e("form",{class:"mb-4 p-4 border rounded-xl shadow-md",onSubmit:E(A,["prevent"])},[e("div",se,[e("div",oe,[s[10]||(s[10]=e("label",{for:"startDate",class:"block text-sm font-medium text-gray-700"},"Fecha de Inicio",-1)),x(e("input",{id:"startDate",type:"date","onUpdate:modelValue":s[2]||(s[2]=t=>n(i).startDate=t),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"},null,512),[[m,n(i).startDate]])]),e("div",ae,[s[11]||(s[11]=e("label",{for:"endDate",class:"block text-sm font-medium text-gray-700"},"Fecha de Fin",-1)),x(e("input",{id:"endDate",type:"date","onUpdate:modelValue":s[3]||(s[3]=t=>n(i).endDate=t),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"},null,512),[[m,n(i).endDate]])]),s[12]||(s[12]=e("div",{class:"flex-1 flex items-end p-2 md:p-0"},[e("button",{type:"submit",class:"w-full py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500"}," Buscar ")],-1))])],32),e("div",re,[e("table",le,[s[13]||(s[13]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ID "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nombre "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Estado "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Entrada "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Salida "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Horas Trabajadas ")])],-1)),e("tbody",de,[(r(!0),l(M,null,q(S.value,t=>{var g,h,y;return r(),l("tr",{key:t.id},[e("td",ne,o(t.user.email),1),e("td",ie,o(t.user.name),1),e("td",ce,[e("span",{class:T([(t.estado||"Ausente")==="Presente"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},o(t.estado),3)]),e("td",pe,o(((g=t.check_in)==null?void 0:g.length)>0?k(t.check_in):"-"),1),e("td",ue,o(((h=t.check_out)==null?void 0:h.length)>0&&t.check_out?k(t.check_out):"-"),1),e("td",xe,o(((y=t.check_out)==null?void 0:y.length)>0?(t.horas_trabajadas/60).toFixed(2):"-"),1)])}),128))])])])])):p("",!0)])])]),a.$page.props.auth.user.roles[0].name!="trabajador"?(r(),l("div",me,[e("div",fe,[s[19]||(s[19]=e("h2",{class:"text-center text-2xl font-bold text-gray-900 mb-6"}," Buscar Registro de Usuario ",-1)),e("div",ge,[e("form",{class:"space-y-6 w-1/2",onSubmit:E(N,["prevent"])},[e("div",null,[s[14]||(s[14]=e("label",{for:"userEmail",class:"block text-sm font-medium text-gray-700"},"Matricula del Usuario",-1)),x(e("input",{id:"userEmail",type:"text","onUpdate:modelValue":s[4]||(s[4]=t=>f.value.email=t),required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500",placeholder:"Matricula del usuario"},null,512),[[m,f.value.email]])]),e("div",null,[s[15]||(s[15]=e("label",{for:"searchDate",class:"block text-sm font-medium text-gray-700"},"Fecha",-1)),x(e("input",{id:"searchDate",type:"date","onUpdate:modelValue":s[5]||(s[5]=t=>f.value.searchDate=t),required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500"},null,512),[[m,f.value.searchDate]])]),s[16]||(s[16]=e("div",null,[e("button",{type:"submit",class:"w-full py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500"}," Buscar ")],-1))],32),v.value?(r(),l("div",he,o(v.value),1)):p("",!0),w.value?(r(),l("div",ye,o(w.value),1)):p("",!0)]),D.value?(r(),l("div",we,[s[18]||(s[18]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Resultados de la Búsqueda",-1)),e("div",ve,[e("table",be,[s[17]||(s[17]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ID "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Sucursal "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nombre "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Apellido P. "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Apellido M. "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Estado "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Entrada "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Salida "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Horas Trabajadas ")])],-1)),e("tbody",_e,[(r(!0),l(M,null,q(D.value,t=>{var g,h,y,F,U,I,V,$;return r(),l("tr",{key:t.id},[e("td",ke,o((g=t==null?void 0:t.user)==null?void 0:g.email),1),e("td",De,o((h=t==null?void 0:t.sucursal)==null?void 0:h.nombre),1),e("td",Se,o((y=t==null?void 0:t.user)==null?void 0:y.name),1),e("td",Ee,o((F=t==null?void 0:t.sucursal)==null?void 0:F.apellido_p),1),e("td",Me,o((U=t==null?void 0:t.sucursal)==null?void 0:U.apellido_m),1),e("td",Fe,[e("span",{class:T([((t==null?void 0:t.estado)||"Ausente")==="Presente"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},o(t==null?void 0:t.estado),3)]),e("td",Ue,o(((I=t.check_in)==null?void 0:I.length)>0?k(t.check_in):"-"),1),e("td",Ie,o(((V=t.check_out)==null?void 0:V.length)>0&&t.check_out?k(t.check_out):"-"),1),e("td",Ve,o((($=t.check_out)==null?void 0:$.length)>0?(t.horas_trabajadas/60).toFixed(2):"-"),1)])}),128))])])])])):p("",!0)])])):p("",!0)],64))}},Be={class:"py-6 px-2"},qe={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 py-10"},Te={class:"bg-white overflow-hidden shadow-xl rounded-lg"},Ce={class:"overflow-hidden"},Ae={__name:"index",setup(R){return(u,d)=>(r(),O(P,{title:"Tablero principal"},{default:Q(()=>[e("div",Be,[e("div",qe,[e("div",Te,[e("div",Ce,[G($e)])])])])]),_:1}))}};export{Ae as default};
