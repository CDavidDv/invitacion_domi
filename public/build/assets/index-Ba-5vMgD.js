import{o as i,e as r,a as e,t as o,n as u,F as h,h as D,g as n,f as w,Q as V,d as f,b as k,z as j,c as B,w as H}from"./app-DPhsFmCj.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as I}from"./AppLayout-XavJZlbB.js";const M={class:"p-6 text-left border shadow-lg rounded-xl bg-white"},z={key:0},F={class:"overflow-y-auto scrollbar-thin divide-y divide-gray-200",style:{"max-height":"25rem"}},q={class:"w-full h-full"},L={class:"w-1/4 my-auto h-full flex flex-col gap-2 items-center justify-center"},P=["onClick"],Q=["onClick"],G={__name:"TicketCard",props:{title:{type:String,required:!0},tickets:{type:Array,required:!0},textColor:{type:String,default:"gray-800"},tipo:{type:String,default:"asignar"},emptyMessage:{type:String,default:""}},emits:["view-ticket-details","cancel-ticket"],setup(l,{emit:g}){const x=g,v=c=>{x("view-ticket-details",c)},p=c=>{x("cancel-ticket",c)};return(c,s)=>(i(),r("div",M,[e("h2",{class:u(["text-xl font-semibold mb-4",{"text-yellow-500":l.tipo==="asignar","text-green-500":l.tipo==="cerrar","text-red-500":l.tipo==="cancelar"}])},o(l.title),3),l.tickets.length?(i(),r("div",z,[e("ul",F,[(i(!0),r(h,null,D(l.tickets,a=>{var b,y;return i(),r("li",{key:a.id,class:u(["p-4 flex justify-between items-start bg-gradient-to-br rounded-lg mb-2",{"from-yellow-50 to-yellow-100":l.tipo==="asignar","from-green-50 to-green-100":l.tipo==="cerrar","from-red-50 to-red-100":l.tipo==="cancelar"}])},[e("div",q,[e("p",{class:u(`text-sm text-${l.textColor}`)},[s[0]||(s[0]=e("strong",null,"ID:",-1)),n(" "+o(a.id),1)],2),e("p",{class:u(`text-sm text-${l.textColor}`)},[s[1]||(s[1]=e("strong",null,"Empleado:",-1)),n(" "+o(((b=a==null?void 0:a.usuario)==null?void 0:b.name)||"No asignado"),1)],2),e("p",{class:u(`text-sm text-${l.textColor}`)},[s[2]||(s[2]=e("strong",null,"Sucursal destino:",-1)),n(" "+o(((y=a==null?void 0:a.sucursal)==null?void 0:y.nombre)||"Sin destino"),1)],2),e("p",{class:u(`text-sm text-${l.textColor}`)},[s[3]||(s[3]=e("strong",null,"Hora salida:",-1)),n(" "+o(a.hora_salida||"N/A"),1)],2),a.hora_llegada?(i(),r("p",{key:0,class:u(`text-sm text-${l.textColor}`)},[s[4]||(s[4]=e("strong",null,"Hora llegada:",-1)),n(" "+o(a.hora_llegada),1)],2)):w("",!0)]),e("div",L,[e("button",{class:"text-sm bg-blue-400 hover:bg-blue-500 text-gray-50 py-1 px-2 rounded-xl",onClick:m=>v(a)}," Ver detalles ",8,P),l.tipo==="asignar"?(i(),r("button",{key:0,class:"text-sm bg-red-400 hover:bg-red-500 text-gray-50 py-1 px-2 rounded-xl ml-2",onClick:m=>p(a)}," Cancelar ",8,Q)):w("",!0)])],2)}),128))])])):(i(),r("p",{key:1,class:u(`text-${l.textColor}`)},o(l.emptyMessage||"No hay tickets en esta categorÃ­a"),3))]))}},C=E(G,[["__scopeId","data-v-ed63fe97"]]),J={class:"container mx-auto p-8 md:p-10 grid grid-cols-1 sm:grid-cols-3 gap-2"},K={key:0,class:"fixed overflow-scroll pt-20 inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},O={class:"bg-white p-8 rounded-2xl shadow-2xl w-full max-w-screen-xl relative"},R={class:"space-y-4"},U={key:0},W={class:"mt-6"},X={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-2"},Y={__name:"TicketsAsignados",setup(l){const{props:g}=V(),x=f(g.ticketsCerrados),v=f(g.ticketsAsignados),p=f(g.ticketsCancelados),c=f(!1),s=f(null),a=m=>{s.value=m,c.value=!0},b=()=>{c.value=!1,s.value=null},y=m=>{j.post("/tickets/cancelar",{ticket:m.id},{preserveScroll:!0,onSuccess:t=>{v.value=t.props.ticketsAsignados,p.value=t.props.ticketsCancelados},onError:t=>{console.error("Error al cancelar el ticket:",t)}})};return(m,t)=>{var $,T,_,S;return i(),r(h,null,[e("div",J,[k(C,{title:"Entregas Asignados",tickets:v.value,tipo:"asignar",onViewTicketDetails:a,onCancelTicket:y},null,8,["tickets"]),k(C,{title:"Entregas Completados",tickets:x.value,tipo:"cerrar",onViewTicketDetails:a},null,8,["tickets"]),k(C,{title:"Entregas Cancelados",tickets:p.value,tipo:"cancelar",onViewTicketDetails:a},null,8,["tickets"])]),c.value?(i(),r("div",K,[e("div",O,[t[9]||(t[9]=e("h3",{class:"text-2xl font-bold text-gray-800 mb-6 text-center border-b pb-4"}," Detalles del Ticket ",-1)),e("div",R,[e("p",null,[t[0]||(t[0]=e("strong",{class:"font-semibold"},"ID:",-1)),n(" "+o(s.value.id),1)]),e("p",null,[t[1]||(t[1]=e("strong",{class:"font-semibold"},"Empleado:",-1)),n(" "+o(((T=($=s.value)==null?void 0:$.usuario)==null?void 0:T.name)||"No asignado"),1)]),e("p",null,[t[2]||(t[2]=e("strong",{class:"font-semibold"},"Sucursal destino:",-1)),n(" "+o(((S=(_=s.value)==null?void 0:_.sucursal)==null?void 0:S.nombre)||"Sin destino"),1)]),e("p",null,[t[3]||(t[3]=e("strong",{class:"font-semibold"},"Hora salida:",-1)),n(" "+o(s.value.hora_salida||"N/A"),1)]),s.value.hora_llegada?(i(),r("p",U,[t[4]||(t[4]=e("strong",{class:"font-semibold"},"Hora llegada:",-1)),n(" "+o(s.value.hora_llegada),1)])):w("",!0)]),e("div",W,[t[8]||(t[8]=e("span",{class:"font-semibold text-lg w-40 text-gray-800"},"Productos:",-1)),e("ul",X,[(i(!0),r(h,null,D(s.value.ticket_productos_asignacion,d=>{var N,A;return i(),r("li",{key:d.id,class:"p-4 border rounded-lg shadow-sm"},[e("p",null,[t[5]||(t[5]=e("strong",null,"Nombre:",-1)),n(" "+o((N=d==null?void 0:d.producto)==null?void 0:N.nombre),1)]),e("p",null,[t[6]||(t[6]=e("strong",null,"Tipo:",-1)),n(" "+o((A=d==null?void 0:d.producto)==null?void 0:A.tipo),1)]),e("p",null,[t[7]||(t[7]=e("strong",null,"Cantidad:",-1)),n(" "+o(d==null?void 0:d.cantidad),1)])])}),128))])]),e("div",{class:"flex justify-center mt-6"},[e("button",{class:"px-6 py-2 bg-red-500 text-white font-semibold text-sm rounded-lg hover:bg-red-600 transition",onClick:b}," Cerrar ")])])])):w("",!0)],64)}}},Z=E(Y,[["__scopeId","data-v-3c411029"]]),ee={class:"py-6 px-2"},te={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},se={class:"bg-white overflow-hidden shadow-xl rounded-lg py-2"},ne={__name:"index",setup(l){return(g,x)=>(i(),B(I,{title:"Tablero principal"},{default:H(()=>[e("div",ee,[e("div",te,[e("div",se,[k(Z)])])])]),_:1}))}};export{ne as default};
